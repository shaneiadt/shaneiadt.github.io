<!DOCTYPE html>
<html class="has-navbar-fixed-top">
<head><meta name="generator" content="Hexo 3.8.0">
    <meta charset="utf-8">
<title>Ram.blings</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.css">




<meta name="description" content="A collection of tech related ramblings from a man with a computer.">



<meta name="keywords" content="Web Development, JavaScript, CSS,">



    <meta name="description" content="A collection of tech related ramblings from a man with a computer.">
<meta name="keywords" content="Web Development, JavaScript, CSS,">
<meta property="og:type" content="website">
<meta property="og:title" content="Ram.blings">
<meta property="og:url" content="https://shaneiadt.github.io/page/2/index.html">
<meta property="og:site_name" content="Ram.blings">
<meta property="og:description" content="A collection of tech related ramblings from a man with a computer.">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Ram.blings">
<meta name="twitter:description" content="A collection of tech related ramblings from a man with a computer.">
<meta name="twitter:creator" content="@ShaneOMoore1">





<link rel="icon" href="/favicon.png">


<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Ovo|Source+Code+Pro">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bulma/0.6.2/css/bulma.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/css/lightgallery.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/css/justifiedGallery.min.css">


<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css">

<link rel="stylesheet" href="/css/style.css">

<script defer src="//use.fontawesome.com/releases/v5.0.8/js/all.js"></script>


    
    
    
    
    
    
    
    
    
    

    


</head>
<body>
    
<nav class="navbar is-transparent is-fixed-top navbar-main" role="navigation" aria-label="main navigation">
    <div class="container">
        <div class="navbar-brand">
            <a class="navbar-item navbar-logo" href="/">
                
                    
                    Ram.blings
                    
                
            </a>
            <div class="navbar-burger">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>
        
        <div class="navbar-menu navbar-start">
            
            <a class="navbar-item " href="/archives">Archives</a>
            
        </div>
        
        <div class="navbar-menu navbar-end">
            
            <a class="navbar-item search" title="Search" href="javascript:;">
                <i class="fas fa-search"></i>
            </a>
            
            
            
            <a class="navbar-item" title="GitHub" href="https://github.com/shaneiadt">
                
                <i class="fab fa-github"></i>
                
            </a>
               
            
        </div>
    </div>
</nav>

    <section class="section">
    <div class="container">
    
        <article class="article content gallery" itemscope itemprop="blogPost">
    <h1 class="article-title is-size-3 is-size-4-mobile" itemprop="name">
        
            <a href="/2020/05/09/Multiple-Selection-Group-Dragging-InteractJs-Svelte/" itemprop="url">Multiple Selection &amp; Group Dragging - InteractJs &amp; Svelte</a>
        
    </h1>
    <div class="article-meta columns is-variable is-1 is-multiline is-mobile is-size-7-mobile">
        <span class="column is-narrow">
            <time datetime="2020-05-09T08:21:57.000Z" itemprop="datePublished">May 9 2020</time>
        </span>
        
        
        <span class="column is-narrow">
            
            
            7 minutes read (About 1023 words)
        </span>
        
    </div>
    <div class="article-entry is-size-6-mobile" itemprop="articleBody">
    
        <p>If you’ve ever touched the <a href="https://developer.mozilla.org/en-US/docs/Web/API/HTML_Drag_and_Drop_API" target="_blank" rel="noopener">HTML Drap and Drop API</a> you’ll know it can be a bit overwhelming somethings.</p>
<p>To minimise the amount of fiddling we’re going to use an open source library called <a href="https://interactjs.io/" target="_blank" rel="noopener">interact.js</a>. Check it out, they have some great demo’s & documentation.</p>
<p>Also we will be building our little app with <a href="https://svelte.dev/" target="_blank" rel="noopener">Svelte</a>, if you haven’t heard of it I’d highly advise you go have a look….like right now it’s awesome!</p>
<h1 id="TL-DR"><a href="#TL-DR" class="headerlink" title="TL;DR"></a>TL;DR</h1><ul>
<li>CodeSandbox: <a href="https://codesandbox.io/s/github/shaneiadt/interactjs-and-svelte" target="_blank" rel="noopener">https://codesandbox.io/s/github/shaneiadt/interactjs-and-svelte</a></li>
<li>Github: <a href="https://github.com/shaneiadt/interactjs-and-svelte" target="_blank" rel="noopener">https://github.com/shaneiadt/interactjs-and-svelte</a></li>
</ul>
<h1 id="Setting-Things-Up"><a href="#Setting-Things-Up" class="headerlink" title="Setting Things Up"></a>Setting Things Up</h1><p>Create a new CodeSandbox or bootstrap a new Svelte project somewhere.</p>
<p>Use npm or yarn to install a new dev dependency called <strong>interactjs</strong>.</p>
<p>That’s it pretty simple I like it :)</p>
<h1 id="HTML-amp-CSS"><a href="#HTML-amp-CSS" class="headerlink" title="HTML & CSS"></a>HTML & CSS</h1><p>HTML</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 1<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 2<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 3<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 4<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line"><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br></pre></td></tr></tbody></table></figure>
<p>CSS</p>
<figure class="highlight css hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-selector-id">#container</span> {</span><br><span class="line">  <span class="hljs-attribute">background</span>: lightgray;</span><br><span class="line">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100vh</span>;</span><br><span class="line">}</span><br><span class="line"><span class="hljs-selector-class">.item</span> {</span><br><span class="line">  <span class="hljs-attribute">display</span>: flex;</span><br><span class="line">  <span class="hljs-attribute">justify-content</span>: center;</span><br><span class="line">  <span class="hljs-attribute">align-items</span>: center;</span><br><span class="line">  <span class="hljs-attribute">position</span>: absolute;</span><br><span class="line">  <span class="hljs-attribute">background</span>: lightblue;</span><br><span class="line">  <span class="hljs-attribute">width</span>: <span class="hljs-number">100px</span>;</span><br><span class="line">  <span class="hljs-attribute">height</span>: <span class="hljs-number">100px</span>;</span><br><span class="line">  <span class="hljs-attribute">cursor</span>: pointer;</span><br><span class="line">  <span class="hljs-attribute">border-radius</span>: <span class="hljs-number">10px</span>;</span><br><span class="line">  <span class="hljs-attribute">padding</span>: <span class="hljs-number">1em</span>;</span><br><span class="line">  <span class="hljs-attribute">touch-action</span>: none;</span><br><span class="line">  <span class="hljs-attribute">transition</span>: box-shadow <span class="hljs-number">0.5s</span>;</span><br><span class="line">}</span><br><span class="line"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:hover</span> {</span><br><span class="line">  <span class="hljs-attribute">-webkit-box-shadow</span>: <span class="hljs-number">0px</span> <span class="hljs-number">10px</span> <span class="hljs-number">15px</span> <span class="hljs-number">0px</span> <span class="hljs-built_in">rgba</span>(0, 0, 0, 0.1);</span><br><span class="line">  <span class="hljs-attribute">-moz-box-shadow</span>: <span class="hljs-number">0px</span> <span class="hljs-number">10px</span> <span class="hljs-number">15px</span> <span class="hljs-number">0px</span> <span class="hljs-built_in">rgba</span>(0, 0, 0, 0.1);</span><br><span class="line">  <span class="hljs-attribute">box-shadow</span>: <span class="hljs-number">0px</span> <span class="hljs-number">10px</span> <span class="hljs-number">15px</span> <span class="hljs-number">0px</span> <span class="hljs-built_in">rgba</span>(0, 0, 0, 0.1);</span><br><span class="line">}</span><br><span class="line"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child(1)</span> {</span><br><span class="line">  <span class="hljs-attribute">top</span>: <span class="hljs-number">100px</span>;</span><br><span class="line">  <span class="hljs-attribute">left</span>: <span class="hljs-number">100px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child(2)</span> {</span><br><span class="line">  <span class="hljs-attribute">top</span>: <span class="hljs-number">30px</span>;</span><br><span class="line">  <span class="hljs-attribute">left</span>: <span class="hljs-number">300px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child(3)</span> {</span><br><span class="line">  <span class="hljs-attribute">top</span>: <span class="hljs-number">400px</span>;</span><br><span class="line">  <span class="hljs-attribute">left</span>: <span class="hljs-number">320px</span>;</span><br><span class="line">}</span><br><span class="line"><span class="hljs-selector-class">.item</span><span class="hljs-selector-pseudo">:nth-child(4)</span> {</span><br><span class="line">  <span class="hljs-attribute">top</span>: <span class="hljs-number">250px</span>;</span><br><span class="line">  <span class="hljs-attribute">left</span>: <span class="hljs-number">200px</span>;</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<p>You should end up with something that looks like this.</p>
<p><img src="/images/interactjs-and-svelte/html-and-css.jpg" alt="HTML and CSS"></p>
<h1 id="Moving-Stuff-Around"><a href="#Moving-Stuff-Around" class="headerlink" title="Moving Stuff Around"></a>Moving Stuff Around</h1><p>I won’t go into too much detail with the interactjs setup & options. Follow along for now & dive into the documentation if you fancy.</p>
<p>To get our items to become draggable we need to first allow the DOM to render run each element through the interact function exported from the interactjs package with some options applied.</p>
<p>As we need to wait until the DOM has render we’ll be using sveltes <a href="https://svelte.dev/tutorial/onmount" target="_blank" rel="noopener">onMount</a> lifecycle function.</p>
<figure class="highlight javascript hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">import</span> { onMount } <span class="hljs-keyword">from</span> <span class="hljs-string">"svelte"</span>;</span><br><span class="line"><span class="hljs-keyword">import</span> interact <span class="hljs-keyword">from</span> <span class="hljs-string">"interactjs"</span>;</span><br><span class="line"></span><br><span class="line">onMount(<span class="hljs-function"><span class="hljs-params">()</span> =></span> {</span><br><span class="line">  <span class="hljs-keyword">const</span> elements = [...document.querySelectorAll(<span class="hljs-string">".item"</span>)];</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">if</span> (elements) {</span><br><span class="line">    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> el <span class="hljs-keyword">of</span> elements) {</span><br><span class="line">      interact(el)</span><br><span class="line">        .draggable({</span><br><span class="line">          modifiers: [</span><br><span class="line">            interact.modifiers.snap({</span><br><span class="line">              targets: [</span><br><span class="line">                interact.createSnapGrid({</span><br><span class="line">                  x: <span class="hljs-number">20</span>,</span><br><span class="line">                  y: <span class="hljs-number">20</span></span><br><span class="line">                })</span><br><span class="line">              ],</span><br><span class="line">              range: <span class="hljs-literal">Infinity</span>,</span><br><span class="line">              relativePoints: [</span><br><span class="line">                {</span><br><span class="line">                  x: <span class="hljs-number">0</span>,</span><br><span class="line">                  y: <span class="hljs-number">0</span></span><br><span class="line">                }</span><br><span class="line">              ]</span><br><span class="line">            }),</span><br><span class="line">            interact.modifiers.restrict({</span><br><span class="line">              restriction: el.parentNode,</span><br><span class="line">              elementRect: {</span><br><span class="line">                top: <span class="hljs-number">0</span>,</span><br><span class="line">                left: <span class="hljs-number">0</span>,</span><br><span class="line">                bottom: <span class="hljs-number">1</span>,</span><br><span class="line">                right: <span class="hljs-number">1</span></span><br><span class="line">              },</span><br><span class="line">              endOnly: <span class="hljs-literal">true</span></span><br><span class="line">            })</span><br><span class="line">          ],</span><br><span class="line">          inertia: <span class="hljs-literal">true</span></span><br><span class="line">        })</span><br><span class="line">        .on(<span class="hljs-string">"dragmove"</span>, event => {</span><br><span class="line">          <span class="hljs-keyword">const</span> items = <span class="hljs-built_in">document</span>.getElementsByClassName(<span class="hljs-string">"selected"</span>);</span><br><span class="line">          <span class="hljs-keyword">const</span> { dx, dy } = event;</span><br><span class="line"></span><br><span class="line">          <span class="hljs-keyword">const</span> parseDataAxis = <span class="hljs-function"><span class="hljs-params">target</span> =></span> axis =></span><br><span class="line">            <span class="hljs-built_in">parseFloat</span>(target.getAttribute(<span class="hljs-string">`data-<span class="hljs-subst">${axis}</span>`</span>));</span><br><span class="line"></span><br><span class="line">          <span class="hljs-keyword">const</span> translate = <span class="hljs-function"><span class="hljs-params">target</span> =></span> (x, y) => {</span><br><span class="line">            target.style.webkitTransform = <span class="hljs-string">"translate("</span> + x + <span class="hljs-string">"px, "</span> + y + <span class="hljs-string">"px)"</span>;</span><br><span class="line">            target.style.transform = <span class="hljs-string">"translate("</span> + x + <span class="hljs-string">"px, "</span> + y + <span class="hljs-string">"px)"</span>;</span><br><span class="line">          };</span><br><span class="line"></span><br><span class="line">          <span class="hljs-keyword">const</span> updateAttributes = <span class="hljs-function"><span class="hljs-params">target</span> =></span> (x, y) => {</span><br><span class="line">            target.setAttribute(<span class="hljs-string">"data-x"</span>, x);</span><br><span class="line">            target.setAttribute(<span class="hljs-string">"data-y"</span>, y);</span><br><span class="line">          };</span><br><span class="line"></span><br><span class="line">          <span class="hljs-keyword">if</span> (items.length > <span class="hljs-number">0</span>) {</span><br><span class="line">            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> item <span class="hljs-keyword">of</span> items) {</span><br><span class="line">              <span class="hljs-keyword">const</span> x = parseDataAxis(item)(<span class="hljs-string">"x"</span>) + dx;</span><br><span class="line">              <span class="hljs-keyword">const</span> y = parseDataAxis(item)(<span class="hljs-string">"y"</span>) + dy;</span><br><span class="line"></span><br><span class="line">              translate(item)(x, y);</span><br><span class="line">              updateAttributes(item)(x, y);</span><br><span class="line">            }</span><br><span class="line">          } <span class="hljs-keyword">else</span> {</span><br><span class="line">            <span class="hljs-keyword">const</span> { target } = event;</span><br><span class="line">            <span class="hljs-keyword">const</span> x = (parseDataAxis(target)(<span class="hljs-string">"x"</span>) || <span class="hljs-number">0</span>) + dx;</span><br><span class="line">            <span class="hljs-keyword">const</span> y = (parseDataAxis(target)(<span class="hljs-string">"y"</span>) || <span class="hljs-number">0</span>) + dy;</span><br><span class="line"></span><br><span class="line">            translate(target)(x, y);</span><br><span class="line">            updateAttributes(target)(x, y);</span><br><span class="line">          }</span><br><span class="line">        });</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line">});</span><br></pre></td></tr></tbody></table></figure>
<p>I hope you’ve just copy & pasted the above, it may look a bit complicated but take some time to read each section and hopefully it’ll make a bit more sense. Another option would be to also not and carrying on <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f606.png?v8">😆</span></p>
<p>One last step is to update our item elements setting their initial x, y position.</p>
<figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 1<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 2<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 3<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 4<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line"><span class="hljs-tag">div</span>></span><br></pre></td></tr></tbody></table></figure>
<h1 id="Drawing-Our-Marquee-Selection-Tool"><a href="#Drawing-Our-Marquee-Selection-Tool" class="headerlink" title="Drawing Our Marquee Selection Tool"></a>Drawing Our Marquee Selection Tool</h1><p>We need to do a couple of different things here such as:</p>
<ol>
<li>Reference the container / canvas</li>
<li>Reference the marquee selection element we will be drawing</li>
<li>Track the mouse move position within the div container element</li>
<li>Fire an event on mouseDown & mouseUp</li>
<li>Detect when our marquee selection has collided with any div items</li>
</ol>
<p>Ok let’s do this…</p>
<h2 id="Create-our-variables"><a href="#Create-our-variables" class="headerlink" title="Create our variables"></a>Create our variables</h2><figure class="highlight javascript hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-keyword">let</span> canvas;</span><br><span class="line"><span class="hljs-keyword">let</span> element;</span><br><span class="line"><span class="hljs-keyword">const</span> mouse = {</span><br><span class="line">  x: <span class="hljs-number">0</span>,</span><br><span class="line">  y: <span class="hljs-number">0</span>,</span><br><span class="line">  startX: <span class="hljs-number">0</span>,</span><br><span class="line">  startY: <span class="hljs-number">0</span></span><br><span class="line">};</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Event-handling-functions"><a href="#Event-handling-functions" class="headerlink" title="Event handling functions"></a>Event handling functions</h2><figure class="highlight javascript hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mouseDown</span>(<span class="hljs-params">e</span>) </span>{</span><br><span class="line">    <span class="hljs-keyword">if</span> (e.target.id === <span class="hljs-string">"container"</span>) {</span><br><span class="line">      <span class="hljs-keyword">const</span> rects = [...canvas.querySelectorAll(<span class="hljs-string">".selection"</span>)];</span><br><span class="line"></span><br><span class="line">      <span class="hljs-keyword">if</span> (rects) {</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> rect <span class="hljs-keyword">of</span> rects) {</span><br><span class="line">          canvas.removeChild(rect);</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      mouse.startX = mouse.x;</span><br><span class="line">      mouse.startY = mouse.y;</span><br><span class="line">      element = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">"div"</span>);</span><br><span class="line">      element.className = <span class="hljs-string">"selection"</span>;</span><br><span class="line">      element.style.border = <span class="hljs-string">"1px dashed black"</span>;</span><br><span class="line">      element.style.position = <span class="hljs-string">"absolute"</span>;</span><br><span class="line">      element.style.left = mouse.x + <span class="hljs-string">"px"</span>;</span><br><span class="line">      element.style.top = mouse.y + <span class="hljs-string">"px"</span>;</span><br><span class="line">      canvas.appendChild(element);</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mouseMove</span>(<span class="hljs-params">e</span>) </span>{</span><br><span class="line">    setMousePosition(e);</span><br><span class="line">    <span class="hljs-keyword">if</span> (element) {</span><br><span class="line">      element.style.width = <span class="hljs-built_in">Math</span>.abs(mouse.x - mouse.startX) + <span class="hljs-string">"px"</span>;</span><br><span class="line">      element.style.height = <span class="hljs-built_in">Math</span>.abs(mouse.y - mouse.startY) + <span class="hljs-string">"px"</span>;</span><br><span class="line">      element.style.left =</span><br><span class="line">        mouse.x - mouse.startX < <span class="hljs-number">0</span> ? mouse.x + <span class="hljs-string">"px"</span> : mouse.startX + <span class="hljs-string">"px"</span>;</span><br><span class="line">      element.style.top =</span><br><span class="line">        mouse.y - mouse.startY < <span class="hljs-number">0</span> ? mouse.y + <span class="hljs-string">"px"</span> : mouse.startY + <span class="hljs-string">"px"</span>;</span><br><span class="line">    }</span><br><span class="line">  }</span><br><span class="line"></span><br><span class="line">  <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mouseUp</span>(<span class="hljs-params">e</span>) </span>{</span><br><span class="line">    element = <span class="hljs-literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">const</span> rect = canvas.querySelector(<span class="hljs-string">".selection"</span>);</span><br><span class="line">    <span class="hljs-keyword">const</span> boxes = [...canvas.querySelectorAll(<span class="hljs-string">".item"</span>)];</span><br><span class="line"></span><br><span class="line">    <span class="hljs-keyword">if</span> (rect) {</span><br><span class="line">      <span class="hljs-keyword">const</span> inBounds = [];</span><br><span class="line"></span><br><span class="line">      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> box <span class="hljs-keyword">of</span> boxes) {</span><br><span class="line">        <span class="hljs-keyword">if</span> (isInBounds(rect, box)) {</span><br><span class="line">          inBounds.push(box);</span><br><span class="line">        } <span class="hljs-keyword">else</span> {</span><br><span class="line">          box.style.boxShadow = <span class="hljs-string">"none"</span>;</span><br><span class="line">          box.classList.remove(<span class="hljs-string">"selected"</span>);</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="hljs-keyword">if</span> (inBounds.length >= <span class="hljs-number">2</span>) {</span><br><span class="line">        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> box <span class="hljs-keyword">of</span> inBounds) {</span><br><span class="line">          box.style.boxShadow = <span class="hljs-string">"0 0 3pt 3pt hsl(141, 53%, 53%)"</span>;</span><br><span class="line">          box.classList.add(<span class="hljs-string">"selected"</span>);</span><br><span class="line">        }</span><br><span class="line">      }</span><br><span class="line"></span><br><span class="line">      <span class="hljs-keyword">if</span> (rect) canvas.removeChild(canvas.querySelector(<span class="hljs-string">".selection"</span>));</span><br><span class="line">    }</span><br><span class="line">  }</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Tracking-mouse-position-amp-element-colliding"><a href="#Tracking-mouse-position-amp-element-colliding" class="headerlink" title="Tracking mouse position & element colliding"></a>Tracking mouse position & element colliding</h2><figure class="highlight javascript hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">setMousePosition</span>(<span class="hljs-params">e</span>) </span>{</span><br><span class="line">  <span class="hljs-keyword">const</span> ev = e || <span class="hljs-built_in">window</span>.event;</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">if</span> (ev.pageX) {</span><br><span class="line">    mouse.x = ev.pageX + <span class="hljs-built_in">window</span>.pageXOffset;</span><br><span class="line">    mouse.y = ev.pageY + <span class="hljs-built_in">window</span>.pageYOffset;</span><br><span class="line">  } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (ev.clientX) {</span><br><span class="line">    mouse.x = ev.clientX + <span class="hljs-built_in">document</span>.body.scrollLeft;</span><br><span class="line">    mouse.y = ev.clientY + <span class="hljs-built_in">document</span>.body.scrollTop;</span><br><span class="line">  }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">isInBounds</span>(<span class="hljs-params">obj1, obj2</span>) </span>{</span><br><span class="line">  <span class="hljs-keyword">const</span> a = obj1.getBoundingClientRect();</span><br><span class="line">  <span class="hljs-keyword">const</span> b = obj2.getBoundingClientRect();</span><br><span class="line"></span><br><span class="line">  <span class="hljs-keyword">return</span> (</span><br><span class="line">    a.x < b.x + b.width &&</span><br><span class="line">    a.x + a.width > b.x &&</span><br><span class="line">    a.y < b.y + b.height &&</span><br><span class="line">    a.y + a.height > b.y</span><br><span class="line">  );</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>
<h2 id="Update-HTML"><a href="#Update-HTML" class="headerlink" title="Update HTML"></a>Update HTML</h2><figure class="highlight html hljs"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">bind:this</span>=<span class="hljs-string">{canvas}</span> <span class="hljs-attr">id</span>=<span class="hljs-string">"container"</span> <span class="hljs-attr">on:mouseup</span>=<span class="hljs-string">{mouseUp}</span> <span class="hljs-attr">on:mousedown</span>=<span class="hljs-string">{mouseDown}</span> <span class="hljs-attr">on:mousemove</span>=<span class="hljs-string">{mouseMove}</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 1<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 2<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 3<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line">  <span class="hljs-tag"><<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">"item"</span> <span class="hljs-attr">data-x</span>=<span class="hljs-string">"0"</span> <span class="hljs-attr">data-y</span>=<span class="hljs-string">"0"</span>></span><span class="hljs-tag"><<span class="hljs-name">span</span>></span>Item 4<span class="hljs-tag"><<span class="hljs-name">&#47;span</span>></span><span class="hljs-tag"><<span class="hljs-name">&#47;div</span>></span></span><br><span class="line"><span class="hljs-tag">div</span>></span><br></pre></td></tr></tbody></table></figure>
<h1 id="Phew-sweat-smile"><a href="#Phew-sweat-smile" class="headerlink" title="Phew! :sweat_smile:"></a>Phew! <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f605.png?v8">😅</span></h1><p>That was quite a lot…but at the end of all this we should have a little some some like so…</p>
<p><img src="/images/interactjs-and-svelte/drag-and-drop.gif" alt="Drag and Drop Final"></p>
<p>Still interested? Checkout the sandbox or github repo <span class="github-emoji" style="color: transparent;background:no-repeat url(https://github.githubassets.com/images/icons/emoji/unicode/1f497.png?v8) center/contain" data-src="https://github.githubassets.com/images/icons/emoji/unicode/1f497.png?v8">💗</span></p>
<ul>
<li>CodeSandbox: <a href="https://codesandbox.io/s/github/shaneiadt/interactjs-and-svelte" target="_blank" rel="noopener">https://codesandbox.io/s/github/shaneiadt/interactjs-and-svelte</a></li>
<li>Github: <a href="https://github.com/shaneiadt/interactjs-and-svelte" target="_blank" rel="noopener">https://github.com/shaneiadt/interactjs-and-svelte</a></li>
</ul>
<script>
        document.querySelectorAll('.github-emoji')
          .forEach(el => {
            if (!el.dataset.src) { return; }
            const img = document.createElement('img');
            img.style = 'display:none !important;';
            img.src = el.dataset.src;
            img.addEventListener('error', () => {
              img.remove();
              el.style.color = 'inherit';
              el.style.backgroundImage = 'none';
              el.style.background = 'none';
            });
            img.addEventListener('load', () => {
              img.remove();
            });
            document.body.appendChild(img);
          });
      </script>
    
    </div>
    
    
</article>




    
    
        
<nav class="pagination is-centered is-rounded" role="navigation" aria-label="pagination">
    <div class="pagination-previous">
        <a href="/">Prev</a>
    </div>
    <div class="pagination-next">
        <a href="/page/3/">Next</a>
    </div>
    <ul class="pagination-list is-hidden-mobile">
        
        <li><a class="pagination-link" href="/">1</a></li>
        
        <li><a class="pagination-link is-current" href="/page/2/">2</a></li>
        
        <li><a class="pagination-link" href="/page/3/">3</a></li>
        
        <li><span class="pagination-ellipsis">&hellip;</span></li>
        
        <li><a class="pagination-link" href="/page/13/">13</a></li>
        
    </ul>
</nav>
    
    </div>
</section>
    <footer class="footer">
    <div class="container">
        <div class="columns content">
            <div class="column is-narrow has-text-centered">
                &copy; 2020 Shane O&#39;Moore&nbsp;
                Powered by <a href="http://hexo.io/" target="_blank">Hexo</a> & <a href="http://github.com/ppoffice/hexo-theme-minos">Minos</a>
            </div>
            <div class="column is-hidden-mobile"></div>

            
            <div class="column is-narrow">
                <div class="columns is-mobile is-multiline is-centered">
                
                    
                <a class="column is-narrow has-text-black" title="GitHub" href="https://github.com/shaneiadt">
                    
                    GitHub
                    
                </a>
                
                </div>
            </div>
            
            
        </div>
    </div>
</footer>
    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment-with-locales.min.js"></script>

<!-- test if the browser is outdated -->
<div id="outdated">
    <h6>Your browser is out-of-date!</h6>
    <p>Update your browser to view this website correctly. <a id="btnUpdateBrowser" href="http://outdatedbrowser.com/">Update my browser now </a></p>
    <p class="last"><a href="#" id="btnCloseUpdateBrowser" title="Close">&times;</a></p>
</div>
<script src="//cdnjs.cloudflare.com/ajax/libs/outdated-browser/1.1.5/outdatedbrowser.min.js"></script>
<script>
    $(document).ready(function () {
        // plugin function, place inside DOM ready function
        outdatedBrowser({
            bgColor: '#f25648',
            color: '#ffffff',
            lowerThan: 'flex'
        })
    });
</script>

<script>
    window.FontAwesomeConfig = {
        searchPseudoElements: true
    }
    moment.locale("en-AU");
</script>


    
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script>
    MathJax.Hub.Config({
        "HTML-CSS": {matchFontHeight: false},
        SVG: {matchFontHeight: false},
        CommonHTML: {matchFontHeight: false}
    });
</script>

    
    
    
    
<script src="//cdnjs.cloudflare.com/ajax/libs/lightgallery/1.6.8/js/lightgallery-all.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/justifiedGallery/3.6.5/js/jquery.justifiedGallery.min.js"></script>
<script>
    (function ($) {
        $(document).ready(function () {
            if (typeof($.fn.lightGallery) === 'function') {
                $('.article.gallery').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof($.fn.justifiedGallery) === 'function') {
                $('.justified-gallery').justifiedGallery();
            }
        });
    })(jQuery);
</script>

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script>
    <style>
        .hljs {
            position: relative;
        }

        .hljs .clipboard-btn {
            float: right;
            color: #9a9a9a;
            background: none;
            border: none;
        }

        .hljs > .clipboard-btn {
            display: none;
            position: absolute;
            right: 4px;
            top: 4px;
        }

        .hljs:hover > .clipboard-btn {
            display: inline;
        }

        .hljs > figcaption > .clipboard-btn {
            margin-right: 4px;
        }
    </style>
    <script>
      $(document).ready(function () {
        $('figure.hljs').each(function(i, figure) {
          var codeId = 'code-' + i;
          var code = figure.querySelector('.code');
          var copyButton = $('<button>Copy <i class="far fa-clipboard"></i></button>');
          code.id = codeId;
          copyButton.addClass('clipboard-btn');
          copyButton.attr('data-clipboard-target-id', codeId);

          var figcaption = figure.querySelector('figcaption');

          if (figcaption) {
            figcaption.append(copyButton[0]);
          } else {
            figure.prepend(copyButton[0]);
          }
        })

        var clipboard = new ClipboardJS('.clipboard-btn', {
          target: function(trigger) {
            return document.getElementById(trigger.getAttribute('data-clipboard-target-id'));
          }
        });
      })
    </script>

    
    

    


<script src="/js/script.js"></script>

    
    <div class="searchbox ins-search">
    <div class="searchbox-mask"></div>
    <div class="searchbox-container ins-search-container">
        <div class="searchbox-input-wrapper">
            <input type="text" class="searchbox-input ins-search-input" placeholder="Type something...">
            <span class="searchbox-close ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="searchbox-result-wrapper ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            CONTENT_URL: '/content.json',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script src="/js/insight.js"></script>
    
</body>
</html>